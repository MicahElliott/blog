<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
    <meta charset="utf-8"/>
    <title>Micah Elliott: Vi-Mode Ubiquitous Cursor Indicator</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href='http://fonts.googleapis.com/css?family=Alegreya:400italic,700italic,400,700' rel='stylesheet'
          type='text/css'>
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.1/styles/default.min.css">
    <link href="/favicon.png" rel="shortcut icon">
    <link href="../css/screen.css" rel="stylesheet" type="text/css" />
</head>
<body>


<nav class="navbar navbar-default">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/index.html" title="Micah Elliott">
              <span class="whoami">
                <!-- <img src="/img/mde-50x.png"> -->
                <!-- Micah Elliott -->
                <span class="zshprompt">%</span> whoami<span class="zshcursor">_</span>
              </span>

              </img>
            </a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
            <ul class="nav navbar-nav navbar-right">
                <li >
                  <a href="/index.html">
                    <i class="fa fa-home"></i>
                    <!-- Home</a></li> -->
                    ~</a></li>
                <li
                >
                  <a href="/archives.html">
                  <i class="fa fa-archive"></i>
                  <!-- Archives</a></li> -->
                  ~/doc</a></li>

                <!--  -->
                <!-- <li -->
                <!-- > -->
                <!-- <a href="/pages/about.html"> -->
                <!--   <i class="glyphicon glyphicon-new-window"></i> -->
                <!--   About -->
                <!-- </a> -->
                <!-- </li> -->
                <!--  -->
                <!-- <li -->
                <!-- > -->
                <!-- <a href="/pages/gpg-key.html"> -->
                <!--   <i class="glyphicon glyphicon-new-window"></i> -->
                <!--   GPG Key -->
                <!-- </a> -->
                <!-- </li> -->
                <!--  -->
                <!-- <li -->
                <!-- > -->
                <!-- <a href="/pages/projects.html"> -->
                <!--   <i class="glyphicon glyphicon-new-window"></i> -->
                <!--   Projects -->
                <!-- </a> -->
                <!-- </li> -->
                <!--  -->

                <li
                  >
                  <!-- <a href="/pages/about.html"><i class="fa fa-info-circle"></i> About</a></li> -->
                  <a href="/pages/about.html"><i class="fa fa-info-circle"></i> README</a></li>

                <li
                  >
                  <!-- <a href="/pages/projects.html"><i class="fa fa-lightbulb-o"></i> Projects</a></li> -->
                  <a href="/pages/projects.html"><i class="fa fa-lightbulb-o"></i> ~/src/proj</a></li>

                <li
                  >
                  <!-- <a href="/pages/gpg-key.html"><i class="fa fa-key"></i> GPG Key</a></li> -->
                  <a href="/pages/gpg-key.html"><i class="fa fa-key"></i> gpg.asc</a></li>

                <!-- <li><a href="/feed.xml"> -->
                <li><a href="http://feeds.feedburner.com/micahelliott/blog">
                    <i class="fa fa-rss"></i>
                    <!-- RSS</a></li> -->
                    rss.xml</a></li>
            </ul>
        </div><!--/.nav-collapse -->
    </div><!--/.container-fluid -->
</nav>


<div class="container">


    <div class="row">
        <div class="col-lg-9">
            <div id="content">
                
<div id="post">
    <div id="post-header">
    <div id="post-meta" class="row">
        <div class="col-lg-8"><b>July 20, 2015</b>

    
    <span id="post-tags">
        <!-- <i>tagged:</i> -->
        <i> — </i>
        <b><i class="fa fa-tags"></i> </b>
        <!-- <i class="glyphicon glyphicon-tags"> Tags: </i> -->
        
        <a href="/tags/urxvt.html"> urxvt</a>
        
        <a href="/tags/zsh.html"> zsh</a>
        
        <a href="/tags/tmux.html"> tmux</a>
        
        <a href="/tags/vim.html"> vim</a>
        
    </span>
    

        </div>

        <!--  -->

    </div>

    <h1>Vi-Mode Ubiquitous Cursor Indicator</h1>

<!--      -->
<!--     <div id="post-tags"> -->
<!--         <b><i class="glyphicon glyphicon-tags"></i> Tags:</b> -->
<!--          -->
<!--         <a href="/tags/urxvt.html"> urxvt</a> -->
<!--          -->
<!--         <a href="/tags/zsh.html"> zsh</a> -->
<!--          -->
<!--         <a href="/tags/tmux.html"> tmux</a> -->
<!--          -->
<!--         <a href="/tags/vim.html"> vim</a> -->
<!--          -->
<!--     </div> -->
<!--      -->

</div>
<div>
    
    <div class="paragraph">
<p><strong>Audience:</strong> <em>programmers</em></p>
</div>
<div class="paragraph">
<p>It should be as easy as possible to tell if you’re in normal or insert mode.
Your eye tends to be on your cursor, so you’ll find the cursor to be the best
indicator of your mode. Of course, you’re effectively in Vim when in Zsh
(<code>bindkey -v</code>, right?), too, so it should have the same cursor indicator.</p>
</div>
<div class="paragraph">
<p>This recipe has been described scattershot in various places, but never
comprehensively. This version will give you a solid block cursor in normal
mode, and a blinking, gray underscore cursor in insert mode. I’ve also set it to
green block for Zsh, blue for Vim. Change it to whatever you like. It’s big and
bright so you can easily find it. Then it’s small and flashing to remind you to
get out of insert mode. Whatever colors/styles you choose, rejoice that it now
works!</p>
</div>
<!-- more -->
<div class="paragraph">
<p>I worked for a couple years without having this working in Tmux and it drove me
crazy. Now that it works well, I find myself using Tmux much more often.</p>
</div>
<div class="paragraph">
<p>This has been battle tested in URxvt, but it also seems to work in Xterm and
Termite.</p>
</div>
<div class="sect1">
<h2 id="_zsh">Zsh</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="title"><code>~/.zshrc</code></div>
<div class="content">
<pre># Modal cursor color for vi's insert/normal modes.
# http://stackoverflow.com/questions/30985436/
# https://bbs.archlinux.org/viewtopic.php?id=95078
# http://unix.stackexchange.com/questions/115009/how-to-change-the-cursor-theme-in-cli
zle-line-init () {
  zle -K viins
  #echo -ne "\033]12;Grey\007"
  #echo -n 'grayline1'
  echo -ne "\033]12;Gray\007"
  echo -ne "\033[4 q"
  #print 'did init' &gt;/dev/pts/16
}
zle -N zle-line-init
zle-keymap-select () {
  if [[ $KEYMAP == vicmd ]]; then
    if [[ -z $TMUX ]]; then
      printf "\033]12;Green\007"
      printf "\033[2 q"
    else
      printf "\033Ptmux;\033\033]12;red\007\033\\"
      printf "\033Ptmux;\033\033[2 q\033\\"
    fi
  else
    if [[ -z $TMUX ]]; then
      printf "\033]12;Grey\007"
      printf "\033[4 q"
    else
      printf "\033Ptmux;\033\033]12;grey\007\033\\"
      printf "\033Ptmux;\033\033[4 q\033\\"
    fi
  fi
  #print 'did select' &gt;/dev/pts/16
}
zle -N zle-keymap-select</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_vim">Vim</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="title"><code>~/.vimrc</code></div>
<div class="content">
<pre>" http://vim.wikia.com/wiki/Configuring_the_cursor
" Tmux details: http://reza.jelveh.me/2011/09/18/zsh-tmux-vi-mode-cursor
if &amp;term =~ "xterm\\|rxvt"
  " Insert
  let &amp;t_SI  = "\&lt;Esc&gt;]12;gray\x7"
  let &amp;t_SI .= "\&lt;Esc&gt;[3 q"
  " Normal
  let &amp;t_EI  = "\&lt;Esc&gt;]12;green\x7"
  let &amp;t_EI .= "\&lt;Esc&gt;[2 q"
  autocmd VimLeave * silent !echo -ne "\033]112\007"
elseif &amp;term =~ "screen-it"
  " Insert
  let &amp;t_SI  = "\&lt;Esc&gt;Ptmux;\&lt;Esc&gt;\&lt;Esc&gt;]12;gray\x7\&lt;Esc&gt;\\"
  let &amp;t_SI .= "\&lt;Esc&gt;Ptmux;\&lt;Esc&gt;\&lt;Esc&gt;[3 q\&lt;Esc&gt;\\"
  " Normal
  let &amp;t_EI  = "\&lt;Esc&gt;Ptmux;\&lt;Esc&gt;\&lt;Esc&gt;]12;blue\x7\&lt;Esc&gt;\\"
  let &amp;t_EI .= "\&lt;Esc&gt;Ptmux;\&lt;Esc&gt;\&lt;Esc&gt;[2 q\&lt;Esc&gt;\\"
  autocmd VimLeave * silent !echo -ne "\033Ptmux;\033\033]112\007\&lt;Esc&gt;\\"
endif</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tmux">Tmux</h2>
<div class="sectionbody">
<div class="paragraph">
<p>I like to keep these lines in my <code>.tmux.conf</code> so I can easily access the
<code>infocmp</code> and <code>tic</code> commands to run on new machines.</p>
</div>
<div class="paragraph">
<p>Note that <code>TERM</code> will be auto-set by Tmux now to <code>screen-it</code>.</p>
</div>
<div class="listingblock">
<div class="title">One time tmux setup commands (keep around in <code>~/.tmux.conf</code>)</div>
<div class="content">
<pre># One-time setup for italic support (instead of reverse).
# http://tmux.svn.sourceforge.net/viewvc/tmux/trunk/FAQ
# % infocmp screen-256color |
#   sed -e 's/^screen[^|]*|[^,]*,/screen-it|screen with italics support,/' \
#     -e 's/%?%p1%t;3%/%?%p1%t;7%/' \
#     -e 's/smso=[^,]*,/smso=\\E[7m,/' \
#     -e 's/rmso=[^,]*,/rmso=\\E[27m,/' \
#     -e '$s/$/ sitm=\\E[3m, ritm=\\E[23m,/' \
#     &gt;| /tmp/screen.terminfo
# Compile and create binary file ~/.terminfo/s/screen-it
# % tic /tmp/screen.terminfo

# This is actually active.
set -g default-terminal "screen-it"</pre>
</div>
</div>
</div>
</div>
</div>
<!--  -->
<!-- <div id="post-tags"> -->
<!--     <b>Tags: </b> -->
<!--      -->
<!--     <a href="/tags/urxvt.html">urxvt</a> -->
<!--      -->
<!--     <a href="/tags/zsh.html">zsh</a> -->
<!--      -->
<!--     <a href="/tags/tmux.html">tmux</a> -->
<!--      -->
<!--     <a href="/tags/vim.html">vim</a> -->
<!--      -->
<!-- </div> -->
<!--  -->

    <div id="prev-next">
        
        <a href="/posts/2015-07-20-stackoverflow-motivation-engine.html">&laquo; Stack Overflow’s Motivation Engine</a>
        
        
        <a class="right" href="/posts/2015-07-17-why-centos.html">CentOS vs the Rest &raquo;</a>
        
    </div>

    


</div>

            </div>
        </div>

        <div class="col-md-3">
            <div id="sidebar">
                <!-- <h3>Links</h3> -->
                <h3><i class="fa fa-external-link-square"></i> Links</h3>
                <ul id="links">
                    <!-- <li><a href="http://cryogenweb.org/docs/home.html">Cryogen Docs</a></li> -->
                    <!-- <li><a href="http://carmenla.me/blog/index.html">Carmen's Blog</a></li> -->
                    <li><a href="http://membean.com/products/Personal/plans">Free Membean</a></li>
                    <li><a href="https://github.com/MicahElliott">Micah’s Github</a></li>
                    <li><a href="https://www.linkedin.com/in/micahelliott">Micah’s LinkedIn</a></li>
                    <li><a href="http://stackoverflow.com/users/326516/micah-elliott">Micah’s Stack Overflow</a></li>
                    <!--  -->
                    <!-- <li><a href="/pages/topics.html">Future Topics</a></li> -->
                    <!--  -->
                </ul>
                
                <div id="recent">
                    <!-- <h3>Recent Posts</h3> -->
                    <h3><i class="fa fa-clock-o"></i> Recent Posts</h3>
                    <ul>
                        
                        <li><a href="/posts/2015-08-08-gpg-howto.html">GPG Howto</a></li>
                        
                        <li><a href="/posts/2015-07-20-stackoverflow-motivation-engine.html">Stack Overflow’s Motivation Engine</a></li>
                        
                        <li><a href="/posts/2015-07-20-vim-zsh-tmux-cursor.html">Vi-Mode Ubiquitous Cursor Indicator</a></li>
                        
                        <li><a href="/posts/2015-07-17-why-centos.html">CentOS vs the Rest</a></li>
                        
                        <li><a href="/posts/2015-07-13-clojure-vim-setup.html">Clojure with Vim Setup</a></li>
                        
                    </ul>
                </div>
                
                
                <div id="tags">
                    <h3><i class="fa fa-tags"></i> Tags</h3>
                    <ul>
                        <!--  -->
                        <!-- <li><a href="/tags/foo.html">foo</a></li> -->
                        <!--  -->
                        <!-- <li><a href="/tags/urxvt.html">urxvt</a></li> -->
                        <!--  -->
                        <!-- <li><a href="/tags/deploy.html">deploy</a></li> -->
                        <!--  -->
                        <!-- <li><a href="/tags/github.html">github</a></li> -->
                        <!--  -->
                        <!-- <li><a href="/tags/rewards.html">rewards</a></li> -->
                        <!--  -->
                        <!-- <li><a href="/tags/security.html">security</a></li> -->
                        <!--  -->
                        <!-- <li><a href="/tags/clojure.html">clojure</a></li> -->
                        <!--  -->
                        <!-- <li><a href="/tags/zsh.html">zsh</a></li> -->
                        <!--  -->
                        <!-- <li><a href="/tags/ansible.html">ansible</a></li> -->
                        <!--  -->
                        <!-- <li><a href="/tags/i3.html">i3</a></li> -->
                        <!--  -->
                        <!-- <li><a href="/tags/gpg.html">gpg</a></li> -->
                        <!--  -->
                        <!-- <li><a href="/tags/draft.html">draft</a></li> -->
                        <!--  -->
                        <!-- <li><a href="/tags/tmux.html">tmux</a></li> -->
                        <!--  -->
                        <!-- <li><a href="/tags/centos.html">centos</a></li> -->
                        <!--  -->
                        <!-- <li><a href="/tags/asciidoc.html">asciidoc</a></li> -->
                        <!--  -->
                        <!-- <li><a href="/tags/setup.html">setup</a></li> -->
                        <!--  -->
                        <!-- <li><a href="/tags/networking.html">networking</a></li> -->
                        <!--  -->
                        <!-- <li><a href="/tags/teaching.html">teaching</a></li> -->
                        <!--  -->
                        <!-- <li><a href="/tags/docker.html">docker</a></li> -->
                        <!--  -->
                        <!-- <li><a href="/tags/vim.html">vim</a></li> -->
                        <!--  -->
                        <!-- <li><a href="/tags/awk.html">awk</a></li> -->
                        <!--  -->
                        <!-- <li><a href="/tags/markdown.html">markdown</a></li> -->
                        <!--  -->
                        <!-- <li><a href="/tags/nuc.html">nuc</a></li> -->
                        <!--  -->
                        <!-- <li><a href="/tags/notes.html">notes</a></li> -->
                        <!--  -->
                        <!-- <li><a href="/tags/motivation.html">motivation</a></li> -->
                        <!--  -->
                        <!-- <li><a href="/tags/blogging.html">blogging</a></li> -->
                        <!--  -->
                        <!-- <li><a href="/tags/systemd.html">systemd</a></li> -->
                        <!--  -->
                        <!-- <li><a href="/tags/infrastructure.html">infrastructure</a></li> -->
                        <!--  -->
                        
                        <a href="/tags/foo.html">foo</a>
                        
                        <a href="/tags/urxvt.html">urxvt</a>
                        
                        <a href="/tags/deploy.html">deploy</a>
                        
                        <a href="/tags/github.html">github</a>
                        
                        <a href="/tags/rewards.html">rewards</a>
                        
                        <a href="/tags/security.html">security</a>
                        
                        <a href="/tags/clojure.html">clojure</a>
                        
                        <a href="/tags/zsh.html">zsh</a>
                        
                        <a href="/tags/ansible.html">ansible</a>
                        
                        <a href="/tags/i3.html">i3</a>
                        
                        <a href="/tags/gpg.html">gpg</a>
                        
                        <a href="/tags/draft.html">draft</a>
                        
                        <a href="/tags/tmux.html">tmux</a>
                        
                        <a href="/tags/centos.html">centos</a>
                        
                        <a href="/tags/asciidoc.html">asciidoc</a>
                        
                        <a href="/tags/setup.html">setup</a>
                        
                        <a href="/tags/networking.html">networking</a>
                        
                        <a href="/tags/teaching.html">teaching</a>
                        
                        <a href="/tags/docker.html">docker</a>
                        
                        <a href="/tags/vim.html">vim</a>
                        
                        <a href="/tags/awk.html">awk</a>
                        
                        <a href="/tags/markdown.html">markdown</a>
                        
                        <a href="/tags/nuc.html">nuc</a>
                        
                        <a href="/tags/notes.html">notes</a>
                        
                        <a href="/tags/motivation.html">motivation</a>
                        
                        <a href="/tags/blogging.html">blogging</a>
                        
                        <a href="/tags/systemd.html">systemd</a>
                        
                        <a href="/tags/infrastructure.html">infrastructure</a>
                        
                    </ul>
                </div>
                
            </div>
        </div>
    </div>
    <footer>Copyright &copy; 2015 Micah Elliott
        <!-- <p style="text-align: center;">Powered by <a href="http://cryogenweb.org">Cryogen</a></p> -->
    </footer>
</div>
<script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
<script src="../js/highlight.pack.js" type="text/javascript"></script>
<script>hljs.initHighlightingOnLoad();</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-6906344-1', 'auto');
  ga('send', 'pageview');
</script>

</body>
</html>
